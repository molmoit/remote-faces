(this["webpackJsonpremote-faces-web"]=this["webpackJsonpremote-faces-web"]||[]).push([[3],{106:function(e,t,n){"use strict";n.r(t),n.d(t,"SingleRoom",(function(){return ie}));var r=n(3),a=n(0),c=n.n(a),i=(n(65),n(4)),o=function(e,t){try{window.localStorage.setItem(e,t)}catch(n){console.info("Failed to save string to localStorage",n)}},u=function(e){try{return window.localStorage.getItem(e)||""}catch(t){return""}},s=n(42),l=n(49),d=(n(69),n(2)),f=n(37),m=n(1),p=n.n(m),v=n(50),b=n(63),O=n(39),g=n(38),k=function(){var e=Object(d.a)(p.a.mark((function e(t,n){var r,a,c,i,o,u,s,l,d,f,m;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof ImageCapture){e.next=21;break}return r=new ImageCapture(n),e.next=4,Object(g.a)(2e3);case 4:return e.prev=4,e.next=7,r.takePhoto();case 7:return c=e.sent,e.next=10,createImageBitmap(c);case 10:a=e.sent,e.next=18;break;case 13:return e.prev=13,e.t0=e.catch(4),e.next=17,r.grabFrame();case 17:a=e.sent;case 18:return i=a.width,o=a.height,e.abrupt("return",{srcImg:a,srcW:i,srcH:o});case 21:return(u=document.getElementById("internal-video")).style.display="block",s=u.srcObject,l=function(){u.srcObject=s},u.srcObject=t,e.next=28,Object(g.a)(2e3);case 28:return d=u,f=u.videoWidth,m=u.videoHeight,e.abrupt("return",{srcImg:d,srcW:f,srcH:m,revert:l});case 32:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e=Object(d.a)(p.a.mark((function e(t){var n,a,c,i,o,u,s,l,d,f,m,v,b,O,g,h,j,E,y;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t?{video:{deviceId:t}}:{video:!0},e.next=3,navigator.mediaDevices.getUserMedia(n);case 3:return a=e.sent,c=a.getVideoTracks(),i=Object(r.a)(c,1),o=i[0],u=document.getElementById("internal-canvas"),s=u.getContext("2d"),l=72,d=72,u.width=l,u.height=d,e.next=13,k(a,o);case 13:return f=e.sent,m=f.srcImg,v=f.srcW,b=f.srcH,O=f.revert,g=Math.max(l/v,d/b),h=Math.min(v,l/g),j=Math.min(b,d/g),E=(v-h)/2,y=(b-j)/2,s.drawImage(m,E,y,h,j,0,0,l,d),O&&O(),o.stop(),e.abrupt("return",u.toDataURL("image/jpeg"));case 27:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=n(36),E=function(e){return Object(O.a)(e)&&"string"===typeof e.image&&function(e){return Object(O.a)(e)&&"string"===typeof e.nickname&&"string"===typeof e.message&&"boolean"===typeof e.liveMode}(e.info)},y=n(40),I=n(102),w=n(103),C=n(43),x=function(){var e=Object(d.a)(p.a.mark((function e(t){var n,a,c,i,o,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t?{audio:{deviceId:t}}:{audio:!0},e.next=3,navigator.mediaDevices.getUserMedia(n);case 3:return a=e.sent,c=a.getAudioTracks(),i=Object(r.a)(c,1),o=i[0],e.next=7,o.applyConstraints({echoCancellation:!0,echoCancellationType:{ideal:"system"},noiseSuppression:{ideal:!0}});case 7:return u=function(){o.stop()},e.abrupt("return",{stream:a,dispose:u});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(e,t,n){var r=t||new MediaStream;return r.addTrack(e),r.dispatchEvent(new MediaStreamTrackEvent("addtrack",{track:e})),e.addEventListener("ended",(function(){r.removeTrack(e),0===r.getTracks().length&&n(r)})),r},T=c.a.memo((function(e){var t=e.image,n=e.nickname,r=e.statusMesg,a=e.obsoleted,i=e.liveMode,o=e.stream,u=e.muted,s=e.micOn,d=e.speakerOn;return c.a.createElement("div",{className:"FaceImages-card",style:{opacity:a?.2:1}},i&&!a&&o?c.a.createElement("video",{className:"FaceImages-photo",ref:function(e){e&&e.srcObject!==o&&(e.srcObject=o)},autoPlay:!0,playsInline:!0,muted:u}):c.a.createElement("img",{src:t||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQI12NgYAAAAAMAASDVlMcAAAAASUVORK5CYII=",className:"FaceImages-photo",alt:"myself"}),c.a.createElement("div",{className:"FaceImages-name"},n),c.a.createElement("div",{className:"FaceImages-mesg",title:Object(l.a)(r)[1]?r:"(No status message)"},Object(l.a)(r)[0]),i&&!a&&o&&c.a.createElement("div",{className:"FaceImages-live-indicator",title:"Live Mode On"},"\u25c9"),i&&!a&&!o&&c.a.createElement("div",{className:"FaceImages-live-indicator",title:"Live Mode Available"},"\u25ce"),i&&!a&&c.a.createElement("div",{className:"FaceImages-mic-speaker-icons"},s&&c.a.createElement("span",{title:"Mic On"},"\ud83c\udfa4"),d&&c.a.createElement("span",{title:"Speaker On"},"\ud83d\udd08")))})),M=c.a.memo((function(e){var t=e.roomId,n=e.userId,i=e.nickname,o=e.statusMesg,u=e.liveMode,s=e.micOn,m=e.speakerOn,v=e.videoDeviceId,O=e.audioDeviceId,g=function(e,t,n,c,i,o,u,s){var m=Object(a.useState)(),v=Object(r.a)(m,2),O=v[0],g=v[1],k=Object(a.useState)([]),y=Object(r.a)(k,2),I=y[0],w=y[1],C=Object(a.useState)(),x=Object(r.a)(C,2),S=x[0],T=x[1];if(S)throw S;var M=Object(a.useRef)();Object(j.e)(e,t,Object(a.useCallback)(function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M.current){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,M.current;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),[]));var N=Object(j.a)(e,t);return Object(j.b)(e,t,Object(a.useCallback)((function(e,t){if(E(e)){var n=Object(f.a)(Object(f.a)({},e),{},{userId:t.userId,received:Date.now(),obsoleted:!1,peerIndex:t.peerIndex});w((function(e){return e.find((function(e){return e.userId===n.userId}))?e.map((function(e){return e.userId===n.userId?n:e})):[].concat(Object(l.a)(e),[n])}))}}),[])),Object(j.d)(e,t,Object(a.useCallback)((function(e){if(e&&"CONNECTION_CLOSED"===e.type){var t=e.peerIndex;w((function(e){var n=!1,r=e.map((function(e){return e.peerIndex===t?(n=!0,Object(f.a)(Object(f.a)({},e),{},{obsoleted:!0})):e}));return n?r:e}))}}),[])),Object(a.useEffect)((function(){var e,t=function(){var e=Date.now()-12e4,t=Date.now()-6e5;w((function(n){var r=!1,a=n.map((function(n){return n.received<e&&!n.obsoleted?(r=!0,Object(f.a)(Object(f.a)({},n),{},{obsoleted:!0})):n.received<t&&n.obsoleted?(r=!0,null):n})).filter((function(e){return e}));return r?a:n}))},r=!1,a=function(){var l=Object(d.a)(p.a.mark((function l(){var d,f;return p.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(!r){l.next=2;break}return l.abrupt("return");case 2:return l.prev=2,t(),l.next=6,h(s);case 6:if(d=l.sent,!r){l.next=9;break}return l.abrupt("return");case 9:g(d),N(f={image:d,info:{nickname:n,message:c,liveMode:i,micOn:o,speakerOn:u}}),M.current=f,l.next=19;break;case 16:l.prev=16,l.t0=l.catch(2),T(l.t0);case 19:e=setTimeout(a,12e4);case 20:case"end":return l.stop()}}),l,null,[[2,16]])})));return function(){return l.apply(this,arguments)}}();return a(),function(){r=!0,clearTimeout(e)}}),[e,t,s,n,c,i,o,u,N]),{myImage:O,roomImages:I}}(t,n,i,o,u,s,m,v),k=g.myImage,M=g.roomImages,N=function(e,t,n,c,i,o,u){var s=Object(a.useState)(null),l=Object(r.a)(s,2),m=l[0],v=l[1],b=Object(a.useState)({}),O=Object(r.a)(b,2),g=O[0],k=O[1],h=Object(a.useRef)(!0);Object(a.useEffect)((function(){return function(){h.current=!1}}),[]);var E=Object(a.useCallback)(function(){var e=Object(d.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0="video"===t.kind,!e.t0){e.next=5;break}return e.next=4,Object(C.c)(t);case 4:e.t0=!e.sent;case 5:if(!e.t0){e.next=7;break}return e.abrupt("return");case 7:r=function(e){h.current&&k((function(t){var r=n.userId,a=t[r],c=Object(I.a)(t,[r].map(w.a));return a===e?c:t}))},k((function(e){var a=e[n.userId],c=S(t,a,r);return a===c?e:Object(f.a)(Object(f.a)({},e),{},Object(y.a)({},n.userId,c))}));case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[]),T=Object(j.c)(e,t,E,n?"faceVideo":void 0),M=T.addTrack,N=T.removeTrack,L=Object(j.c)(e,t,E,c?"faceAudio":void 0),A=L.addTrack,D=L.removeTrack;return Object(a.useEffect)((function(){var e=null;return n&&M&&N&&Object(d.a)(p.a.mark((function t(){var n,a,c,i,u,s,l;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(C.a)(o);case 2:n=t.sent,a=n.stream,c=n.dispose,i=a.getVideoTracks(),u=Object(r.a)(i,1),s=u[0],M(s),l=function(e){h.current&&v((function(t){return t===e?null:t}))},v((function(e){return S(s,e,l)})),e=function(){N(s),c(),s.dispatchEvent(new Event("ended"))};case 10:case"end":return t.stop()}}),t)})))(),function(){e&&e()}}),[e,n,o,M,N]),Object(a.useEffect)((function(){var e=null;return c&&A&&D&&Object(d.a)(p.a.mark((function t(){var n,a,c,i,o,s,l;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x(u);case 2:n=t.sent,a=n.stream,c=n.dispose,i=a.getAudioTracks(),o=Object(r.a)(i,1),s=o[0],A(s),l=function(e){h.current&&v((function(t){return t===e?null:t}))},v((function(e){return S(s,e,l)})),e=function(){D(s),c(),s.dispatchEvent(new Event("ended"))};case 10:case"end":return t.stop()}}),t)})))(),function(){e&&e()}}),[e,c,u,A,D]),Object(a.useEffect)((function(){if(m){m.getAudioTracks().forEach((function(e){e.enabled=i}));var e=function(e){var t=e.track;"audio"===t.kind&&(t.enabled=i)};return m.addEventListener("addtrack",e),function(){m.removeEventListener("addtrack",e)}}}),[m,i]),{faceStream:m,faceStreamMap:g}}(t,n,u,u,s,v,O),L=N.faceStream,A=N.faceStreamMap;return c.a.createElement(c.a.Fragment,null,c.a.createElement(T,{image:k,nickname:i,statusMesg:o,liveMode:u,stream:L||void 0,muted:!0}),M.map((function(e){return c.a.createElement(T,{key:e.userId,image:e.image,nickname:e.info.nickname,statusMesg:e.info.message,obsoleted:e.obsoleted,liveMode:e.info.liveMode,stream:u&&A[e.userId]||void 0,muted:!m,micOn:e.info.micOn,speakerOn:e.info.speakerOn})})))})),N=n(70),L=n.n(N),A=(n(71),n(5)),D=function(e,t){var n=t[1]-e[1];return 0===n?e[0].length-t[0].length:n},P=function(e,t,n){var c=Object(a.useRef)([]),i=Object(a.useState)([]),o=Object(r.a)(i,2),u=o[0],s=o[1],d=Object(a.useCallback)((function(e){if(!c.current.some((function(t){return t.messageId===e.messageId})))if(c.current.unshift(e),c.current.length>1e3&&c.current.pop(),e.chatInReplyTo){var t=e.chatText,n=e.chatInReplyTo;s((function(e){return e.map((function(e){if(e.messageId===n){var r=new Map(e.replies);r.set(t,(r.get(t)||0)+1);var a=Object(l.a)(r.entries());return a.sort(D),Object(f.a)(Object(f.a)({},e),{},{replies:a})}return e}))}))}else{var r={messageId:e.messageId,nickname:e.nickname,createdAt:e.createdAt,text:e.chatText,replies:[],time:new Date(e.createdAt).toLocaleString().split(" ")[1].slice(0,-3)};s((function(e){var t=[r].concat(Object(l.a)(e));return t.length>100&&t.pop(),t.sort((function(e,t){return t.createdAt-e.createdAt})),t}))}}),[]);Object(j.e)(e,t,Object(a.useCallback)(function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=c.current.length-1;case 1:if(!(t>=0)){e.next=9;break}return e.next=4,Object(v.a)(Object(g.a)(5e3*Math.random()));case 4:return e.next=6,c.current[t];case 6:t-=1,e.next=1;break;case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),[]));var m=Object(j.a)(e,t);return Object(j.b)(e,t,Object(a.useCallback)((function(e){var t;(t=e,!Object(O.a)(t)||"string"!==typeof t.userId||"string"!==typeof t.nickname||"string"!==typeof t.messageId||"number"!==typeof t.createdAt||"string"!==typeof t.chatText||"undefined"!==typeof t.chatInReplyTo&&"string"!==typeof t.chatInReplyTo)||d(e)}),[d])),{chatList:u,sendChat:Object(a.useCallback)((function(e){var r={userId:t,nickname:n,messageId:Object(A.f)(),createdAt:Date.now(),chatText:e};m(r),d(r)}),[m,t,n,d]),replyChat:Object(a.useCallback)((function(e,r){var a={userId:t,nickname:n,messageId:Object(A.f)(),createdAt:Date.now(),chatText:e,chatInReplyTo:r};m(a),d(a)}),[m,t,n,d])}},R=(n(72),n(48)),U=R.b,_=n(76),F=n.n(_),W=n(78),V=n.n(W),z=(n(93),{toolbar:["specialCharacters","|","bold","italic","link","blockQuote","|","imageUpload","insertTable","mediaEmbed","|","undo","redo"],balloonToolbar:["heading","|","bulletedList","numberedList","indent","outdent"],link:{addTargetToExternalLinks:!0}}),B=c.a.memo((function(e){var t=e.registerClear,n=e.onChange;return c.a.createElement(F.a,{editor:V.a,config:z,onInit:function(e){t((function(){e.setData("")})),function(e){e.plugins.get("SpecialCharacters").addItems("Emoji",[{title:"smiley face",character:"\ud83d\ude0a"},{title:"rocket",character:"\ud83d\ude80"},{title:"wind blowing face",character:"\ud83c\udf2c\ufe0f"},{title:"floppy disk",character:"\ud83d\udcbe"},{title:"heart",character:"\u2764\ufe0f"}])}(e)},onChange:function(e,t){var r=t.getData();n(r)}})})),H=c.a.memo((function(e){var t,n=e.item,i=e.replyChat,o=Object(a.useState)(!1),u=Object(r.a)(o,2),s=u[0],l=u[1],d=function(e){return i(e,n.messageId)};return c.a.createElement("li",{key:n.messageId,className:"MomentaryChat-listPart"},s&&c.a.createElement(U,{onSelect:function(e){d(e.native),l(!1)}}),c.a.createElement("div",{className:"MomentaryChat-listPart-header"},c.a.createElement("div",{className:"MomentaryChat-iconButton-container"},c.a.createElement("div",{className:"MomentaryChat-iconButton"},c.a.createElement("button",{type:"button",onClick:function(){l(!s)}},"+"))),c.a.createElement("span",{className:"MomentaryChat-nickname"},n.nickname||"No Name"),c.a.createElement("span",{className:"MomentaryChat-time"},n.time)),c.a.createElement("div",{className:"MomentaryChat-text ck-content",dangerouslySetInnerHTML:(t=n.text,{__html:L.a.sanitize(t,{ADD_ATTR:["target"]})})}),n.replies.map((function(e){var t=Object(r.a)(e,2),n=t[0],a=t[1];return c.a.createElement("button",{key:n,className:"MomentaryChat-icon",type:"button",onClick:function(){return d(n)}},n," ",a)})))})),G=c.a.memo((function(e){var t,n=e.chatList,r=e.replyChat,i=Object(a.useRef)(null),o=null===(t=n[0])||void 0===t?void 0:t.messageId;return Object(a.useEffect)((function(){i.current&&o&&(i.current.scrollTop=i.current.scrollHeight)}),[o]),c.a.createElement("ul",{className:"MomentaryChat-list",ref:i},n.map((function(e){return c.a.createElement(H,{key:e.messageId,item:e,replyChat:r})})))})),J=c.a.memo((function(e){var t=e.roomId,n=e.userId,i=e.nickname,o=Object(a.useRef)(null),u=P(t,n,i),s=u.chatList,l=u.sendChat,d=u.replyChat,f=Object(a.useRef)(),m=Object(a.useState)(""),p=Object(r.a)(m,2),v=p[0],b=p[1];return c.a.createElement("div",{className:"MomentaryChat-container",ref:o},c.a.createElement(G,{chatList:s,replyChat:d}),c.a.createElement("div",{className:"MomentaryChat-editor"},c.a.createElement(B,{registerClear:function(e){f.current=e},onChange:b})),c.a.createElement("div",{className:"MomentaryChat-button"},c.a.createElement("button",{type:"button",onClick:function(){v&&(l(v),b(""),f.current&&f.current())},disabled:!v},"Send")))})),K=(n(94),c.a.memo((function(e){var t=e.liveMode,n=e.setLiveMode,r=e.micOn,a=e.setMicOn,i=e.speakerOn,o=e.setSpeakerOn,u=e.secondColumnOpen,s=e.setSecondColumnOpen;return c.a.createElement("div",{className:"ControlPanel-container"},c.a.createElement("button",{type:"button",onClick:function(){return n((function(e){return!e}))},title:t?"Disable Live Mode":"Enable Live Mode"},"\ud83c\udfa5",!t&&c.a.createElement("span",{className:"ControlPanel-disabled"},"\u274c")),c.a.createElement("button",{type:"button",onClick:function(){return s((function(e){return!e}))},title:u?"Close Right Pane":"Open Right Pane"},u?c.a.createElement(c.a.Fragment,null,"\u25c0"):c.a.createElement(c.a.Fragment,null,"\u25b6")),c.a.createElement("button",{type:"button",onClick:function(){return a((function(e){return!e}))},title:r?"Disable Mic":"Enable Mic"},"\ud83c\udfa4",!r&&c.a.createElement("span",{className:"ControlPanel-disabled"},"\u274c")),c.a.createElement("button",{type:"button",onClick:function(){return o((function(e){return!e}))},title:i?"Disable Speaker":"Enable Speaker"},c.a.createElement(c.a.Fragment,null,"\ud83d\udd08"),!i&&c.a.createElement("span",{className:"ControlPanel-disabled"},"\u274c")))}))),Q=(n(95),n(62)),Y="true"!==u("config_hidden"),Z="remote-faces://".concat(window.location.href.replace(/^https:\/\//,"")),q=c.a.memo((function(e){var t=e.initialText,n=e.onUpdate,i=e.buttonLabel,o=e.placeholder,u=e.clearOnUpdate,s=Object(a.useState)(t),l=Object(r.a)(s,2),d=l[0],f=l[1];return c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),d&&(n(d),u&&f(""))}},c.a.createElement("input",{value:d,onChange:function(e){return f(e.target.value)},placeholder:o}),i&&c.a.createElement("button",{type:"submit",disabled:!d},i))})),X=c.a.memo((function(e){var t=e.roomId,n=e.userId,i=e.nickname,u=e.setNickname,s=e.videoDeviceId,l=e.setVideoDeviceId,d=e.audioDeviceId,f=e.setAudioDeviceId,m=Object(a.useState)(Y),p=Object(r.a)(m,2),v=p[0],b=p[1];Object(a.useEffect)((function(){o("config_hidden",v?"false":"true")}),[v]);var O=Object(Q.b)(),g=Object(Q.a)(),k=Object(j.d)(t,n);return c.a.createElement("div",{className:"SettingPanel-container"},c.a.createElement("button",{type:"button",className:"SettingPanel-config-toggle",onClick:function(){return b((function(e){return!e}))}},"Setting",v?c.a.createElement(c.a.Fragment,null,"\u25bc"):c.a.createElement(c.a.Fragment,null,"\u25b6")),v&&c.a.createElement("div",{className:"SettingPanel-config"},c.a.createElement("div",{className:"SettingPanel-config-row"},c.a.createElement("span",{title:"Share this link with your colleagues"},"Room Link:"," "),c.a.createElement("input",{value:window.location.href,readOnly:!0})," ",c.a.createElement("a",{href:Z,title:"Open this link in the desktop app"},"Open App")),c.a.createElement("div",{className:"SettingPanel-config-row"},"Your Name:"," ",c.a.createElement(q,{initialText:i,onUpdate:function(e){u(e),o("nickname",e)},placeholder:"Enter your name",buttonLabel:"Set"})),c.a.createElement("div",{className:"SettingPanel-config-row"},"Select Camera:"," ",c.a.createElement("select",{value:s,onChange:function(e){l(e.target.value),o("faceimage_video_device_id",e.target.value)}},O.map((function(e){return c.a.createElement("option",{key:e.deviceId,value:e.deviceId},e.label)})))),c.a.createElement("div",{className:"SettingPanel-config-row"},"Select Mic:"," ",c.a.createElement("select",{value:d,onChange:function(e){f(e.target.value),o("faceimage_audio_device_id",e.target.value)}},g.map((function(e){return c.a.createElement("option",{key:e.deviceId,value:e.deviceId},e.label)})))),c.a.createElement("div",{className:"SettingPanel-status"},JSON.stringify(k))))})),$=(n(96),c.a.memo((function(e){var t=e.initialText,n=e.onUpdate,i=e.buttonLabel,o=e.placeholder,u=e.clearOnUpdate,s=Object(a.useState)(t),l=Object(r.a)(s,2),d=l[0],f=l[1];return c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),d&&(n(d),u&&f(""))}},c.a.createElement("input",{value:d,onChange:function(e){return f(e.target.value)},placeholder:o}),i&&c.a.createElement("button",{type:"submit",disabled:!d},i))}))),ee=c.a.memo((function(e){var t=e.emoji,n=e.setEmoji,i=e.setStatusMesg,o=Object(a.useState)(!1),u=Object(r.a)(o,2),s=u[0],l=u[1];return c.a.createElement("div",{className:"UserStatus-container"},c.a.createElement("div",{className:"UserStatus-status-area"},c.a.createElement("div",{className:"UserStatus-emoji"},c.a.createElement("button",{type:"button",onClick:function(){l(!s)}},t?c.a.createElement(R.a,{emoji:t,size:10}):":)")),t&&c.a.createElement("div",{className:"UserStatus-statusmesg"},c.a.createElement($,{initialText:"",onUpdate:i,placeholder:"Enter status message...",buttonLabel:"Set"})),c.a.createElement("button",{type:"button",onClick:function(){n(null),i(""),l(!1)},disabled:!t},"Clear")),s&&c.a.createElement(U,{onSelect:function(e){n(e),l(!1)}}))})),te=(n(97),{Welcome:c.a.lazy((function(){return n.e(9).then(n.bind(null,105))})),"Screen Share":c.a.lazy((function(){return n.e(7).then(n.bind(null,107))})),"Video Share":c.a.lazy((function(){return n.e(8).then(n.bind(null,108))})),"White Board":c.a.lazy((function(){return n.e(5).then(n.bind(null,109))}))}),ne=c.a.memo((function(e){var t=e.roomId,n=e.userId,i=e.nickname,o=Object(a.useState)("Welcome"),u=Object(r.a)(o,2),s=u[0],l=u[1];return c.a.createElement("div",{className:"SelectivePane-container"},c.a.createElement("div",{className:"SelectivePane-select"},"\u2630",c.a.createElement("select",{value:s,onChange:function(e){return l(e.target.value)}},Object.keys(te).map((function(e){return c.a.createElement("option",{key:e,value:e},e)})))),Object(a.createElement)(te[s],{roomId:t,userId:n,nickname:i}))})),re=u("nickname"),ae=u("faceimage_video_device_id"),ce=u("faceimage_audio_device_id"),ie=c.a.memo((function(e){var t=e.roomId,n=e.userId,o=Object(a.useState)(re),u=Object(r.a)(o,2),l=u[0],d=u[1],f=Object(a.useState)(""),m=Object(r.a)(f,2),p=m[0],v=m[1],b=Object(a.useState)(null),O=Object(r.a)(b,2),g=O[0],k=O[1];Object(a.useEffect)((function(){Object(i.e)(t)}),[t]);var h=Object(a.useState)(ae),j=Object(r.a)(h,2),E=j[0],y=j[1],I=Object(a.useState)(ce),w=Object(r.a)(I,2),C=w[0],x=w[1],S=Object(a.useState)(!1),T=Object(r.a)(S,2),N=T[0],L=T[1],A=Object(a.useState)(!1),D=Object(r.a)(A,2),P=D[0],R=D[1],U=Object(a.useState)(!1),_=Object(r.a)(U,2),F=_[0],W=_[1],V=Object(a.useState)(!0),z=Object(r.a)(V,2),B=z[0],H=z[1],G=Object(a.useState)(!0),Q=Object(r.a)(G,2),Y=Q[0],Z=Q[1];return Object(s.a)(t,n),c.a.createElement("div",{className:"SingleRoom-container"},c.a.createElement("div",{className:"SingleRoom-1st-column"},c.a.createElement(K,{liveMode:N,setLiveMode:L,micOn:P,setMicOn:R,speakerOn:F,setSpeakerOn:W,secondColumnOpen:B,setSecondColumnOpen:H}),c.a.createElement(M,{roomId:t,userId:n,videoDeviceId:E,audioDeviceId:C,nickname:l,statusMesg:"".concat((null===g||void 0===g?void 0:g.native)||" ").concat(p),liveMode:N,micOn:P,speakerOn:F})),c.a.createElement("div",{className:"SingleRoom-2nd-column",style:{width:B?"inherit":"0"}},c.a.createElement("button",{type:"button",className:"SingleRoom-toggle-3rd-column",onClick:function(){return Z((function(e){return!e}))},title:Y?"Close Right Pane":"Open Right Pane"},Y?c.a.createElement(c.a.Fragment,null,"\u25c0"):c.a.createElement(c.a.Fragment,null,"\u25b6")),c.a.createElement(ee,{emoji:g,setEmoji:k,setStatusMesg:v}),c.a.createElement(X,{roomId:t,userId:n,nickname:l,setNickname:d,videoDeviceId:E,setVideoDeviceId:y,audioDeviceId:C,setAudioDeviceId:x}),c.a.createElement(J,{roomId:t,userId:n,nickname:l})),c.a.createElement("div",{className:"SingleRoom-3rd-column",style:{display:Y?"inherit":"none"}},c.a.createElement(ne,{roomId:t,userId:n,nickname:l})))}));t.default=ie},36:function(e,t,n){"use strict";n.d(t,"d",(function(){return E})),n.d(t,"e",(function(){return y})),n.d(t,"a",(function(){return I})),n.d(t,"b",(function(){return w})),n.d(t,"c",(function(){return C}));var r=n(1),a=n.n(r),c=n(2),i=n(3),o=n(66),u=n(0),s=n(37),l=n(67),d=n.n(l),f=n(38),m=n(5),p=n(4),v=n(39),b=n(8),O=new WeakMap,g=function(e,t){if(O.has(e))return e;O.set(e,!0);var n=function(){var n=Object(c.a)(a.a.mark((function n(){var r;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(f.a)(5e3);case 2:!(r=t.getTransceivers().find((function(t){return t.receiver.track===e})))||"inactive"!==r.currentDirection&&"sendonly"!==r.currentDirection||(e.stop(),e.dispatchEvent(new Event("ended")));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return e.addEventListener("mute",n),e},k=function(e){var t=Object(b.e)(e);return 10<=t&&t<=14},h=new Map,j=function(e,t,n){var r="".concat(e,"_").concat(t),i=h.get(r);if(!i){var o=new Set,u=new Set,l=new Set,O=new Set;i={room:function(e,t,n,r,i,o){var u=!1,l=null,O=Object(b.b)(),h=[],j=null,E=function(){if(!u){var e=O.getConnectedPeerIds().map(b.e);n({type:"CONNECTED_PEERS",peerIndexList:e})}},y=function(e){if(!u&&l&&l.id!==e&&!l.disconnected&&!O.hasConn(e)){console.log("connectPeer",e);var t=l.connect(e);L(t)}},I=function(e){if(!u){var n=O.getConnectedPeerIds();O.forEachConnectedConns((function(r){N(r,{userId:t,data:e,peers:n,mediaTypes:h})}))}},w=function(e,t){N(e,{SDP:t})},C=function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(v.a)(n)){e.next=2;break}return e.abrupt("return");case 2:if(!Object(v.a)(n.offer)){e.next=21;break}return r=n.offer,e.prev=4,e.next=7,t.peerConnection.setRemoteDescription(r);case 7:return R(t),e.next=10,t.peerConnection.createAnswer();case 10:return c=e.sent,e.next=13,t.peerConnection.setLocalDescription(c);case 13:w(t,{answer:c}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),console.info("handleSDP offer failed",e.t0);case 19:e.next=38;break;case 21:if(!Object(v.a)(n.answer)){e.next=37;break}return i=n.answer,e.prev=23,e.next=26,t.peerConnection.setRemoteDescription(i);case 26:e.next=35;break;case 28:return e.prev=28,e.t1=e.catch(23),console.info("handleSDP answer failed",e.t1),e.next=33,Object(f.a)(30*Math.random()*1e3);case 33:U(t),R(t);case 35:e.next=38;break;case 37:console.warn("unknown SDP",n);case 38:case"end":return e.stop()}}),e,null,[[4,16],[23,28]])})));return function(t,n){return e.apply(this,arguments)}}(),x=function(e,t){"string"===typeof t&&O.setUserId(e,t)},S=function(){var e=Object(c.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Array.isArray(n)||!n.every((function(e){return"string"===typeof e}))){e.next=5;break}return O.setMediaTypes(t,n),e.next=4,Object(f.a)(5e3);case 4:R(t);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(e,t){var n=O.getUserId(e);if(n){var r={userId:n,peerIndex:Object(b.d)(e),mediaTypes:O.getMediaTypes(e)};try{i(t,r)}catch(a){console.warn("receiveData",a)}}},M=function(){var t=Object(c.a)(a.a.mark((function t(n,r){var c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!u){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.t0=JSON,t.next=6,Object(m.a)(r,e.slice(b.a));case 6:if(t.t1=t.sent,c=t.t0.parse.call(t.t0,t.t1),console.log("decrypted payload",n.peer,c),Object(v.a)(c)){t.next=11;break}return t.abrupt("return");case 11:C(n,c.SDP),x(n,c.userId),S(n,c.mediaTypes),a=c.peers,Array.isArray(a)&&a.forEach((function(t){Object(b.f)(e,t)&&y(t)})),T(n,c.data),t.next=21;break;case 18:t.prev=18,t.t2=t.catch(2),console.info("Error in handlePayload",t.t2,r);case 21:case"end":return t.stop()}var a}),t,null,[[2,18]])})));return function(e,n){return t.apply(this,arguments)}}(),N=function(){var t=Object(c.a)(a.a.mark((function t(n,r){var c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(m.b)(JSON.stringify(r),e.slice(b.a));case 3:c=t.sent,n.send(c),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("sendPayload",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}(),L=function(e){if(O.isConnected(e.peer))e.close();else{O.addConn(e),e.on("open",(function(){O.markConnected(e),console.log("dataConnection open",e),E();r((function(n){var r=O.getConnectedPeerIds();N(e,{userId:t,data:n,peers:r,mediaTypes:h})}))})),e.on("data",(function(t){return M(e,t)})),e.peerConnection.addEventListener("icegatheringstatechange",(function(){var t=e.peerConnection;"complete"===t.iceGatheringState&&(t.onicecandidate=function(){})}));var i=new WeakMap;e.peerConnection.addEventListener("negotiationneeded",Object(c.a)(a.a.mark((function t(){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i.has(e)){t.next=2;break}return t.abrupt("return");case 2:return i.set(e,!0),t.next=5,Object(f.a)(2e3);case 5:if(i.delete(e),O.isConnected(e.peer)){t.next=8;break}return t.abrupt("return");case 8:return t.next=10,e.peerConnection.createOffer();case 10:return n=t.sent,t.next=13,e.peerConnection.setLocalDescription(n);case 13:w(e,{offer:n});case 14:case"end":return t.stop()}}),t)})))),e.peerConnection.addEventListener("track",(function(t){var n=O.getUserId(e);if(n){var r={userId:n,peerIndex:Object(b.e)(e.peer),mediaTypes:O.getMediaTypes(e)};o(g(t.track,e.peerConnection),r)}})),e.on("close",(function(){if(O.delConn(e),console.log("dataConnection closed",e),n({type:"CONNECTION_CLOSED",peerIndex:Object(b.d)(e)}),E(),0===O.getConnectedPeerIds().length)D(!0);else if(k(e.peer)&&l&&!l.disconnected&&!k(l.id)){var t=30+Math.floor(60*Math.random());console.log("Disconnected seed peer: ".concat(Object(b.e)(e.peer),", reinit in ").concat(t,"sec...")),setTimeout(D,1e3*t)}}))}},A=function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;if(!u&&!l){O.clearAll();var a=10<=r&&r<=14,c=a?r:Object(m.e)();n({type:"INITIALIZING_PEER",peerIndex:c});var i=Object(b.c)(e,c);console.log("initMyPeer start",r,i);var o=new d.a(i,Object(s.a)(Object(s.a)({},Object(p.d)()||{}),{},{debug:3}));l=o,o.on("open",(function(){l=o,n({type:"CONNECTING_SEED_PEERS"});for(var t=10;t<=14;t+=1){var r=Object(b.c)(e,t);y(r)}})),o.on("error",(function(e){"unavailable-id"===e.type?(l=null,o.destroy(),t(r+1)):"peer-unavailable"===e.type||("disconnected"===e.type?(console.log("initMyPeer disconnected error",r,e),o.destroy()):"network"===e.type?console.log("initMyPeer network error",r,e):"server-error"===e.type?(console.log("initMyPeer server error",r,e),n({type:"SERVER_ERROR"})):(console.error("initMyPeer unknown error",r,e.type,e),n({type:"UNKNOWN_ERROR",err:e})))})),o.on("connection",(function(e){l===o?(console.log("new connection received",e),n({type:"NEW_CONNECTION",peerIndex:Object(b.d)(e)}),L(e)):e.close()})),o.on("disconnected",(function(){console.log("initMyPeer disconnected",r),setTimeout((function(){l!==o||o.destroyed||(console.log("initMyPeer reconnecting",r),n({type:"RECONNECTING"}),o.reconnect())}),5e3)})),o.on("close",(function(){l===o?(console.log("initMyPeer closed, re-initializing",r),l=null,setTimeout(t,2e4)):console.log("initMyPeer closed, ignoring",r)}))}};A();var D=function(t){if(l&&!l.disconnected){if(!t){if(k(l.id))return;for(var n=!0,r=10;r<=14;r+=1){var a=Object(b.c)(e,r);if(!O.isConnected(a)){n=!1;break}}if(n)return void E()}var c=l;l=null,c.destroy(),A()}},P=new WeakMap,R=function(e){var t=e.peerConnection.getSenders(),n=O.getMediaTypes(e);j&&j.getTracks().forEach((function(r){var a=P.get(r);j&&a&&n.includes(a)&&t.every((function(e){return e.track!==r}))&&e.peerConnection.addTrack(r,j)})),t.forEach((function(t){if(t.track){var r=P.get(t.track);r&&n.includes(r)||e.peerConnection.removeTrack(t)}})),t.some((function(e){return e.track&&!e.transport}))&&e.peerConnection.dispatchEvent(new Event("negotiationneeded"))},U=function(e){e.peerConnection.getSenders().forEach((function(t){t.track&&e.peerConnection.removeTrack(t)}))};return{broadcastData:I,acceptMediaTypes:function(e){(h=e).length?j||(j=new MediaStream,O.forEachConnectedConns((function(e){var t=O.getUserId(e);if(t){var n={userId:t,peerIndex:Object(b.e)(e.peer),mediaTypes:O.getMediaTypes(e)};e.peerConnection.getReceivers().forEach((function(t){"live"===t.track.readyState&&o(g(t.track,e.peerConnection),n)}))}}))):j=null,I(null)},addTrack:function(e,t){j&&(P.set(t,e),j.addTrack(t),O.forEachConnsAcceptingMedia(e,(function(e){try{if(!j)return;e.peerConnection.addTrack(t,j)}catch(n){if("InvalidAccessError"!==n.name)throw n}})))},removeTrack:function(e,t){j&&j.removeTrack(t),O.forEachConnsAcceptingMedia(e,(function(e){var n=e.peerConnection.getSenders().find((function(e){return e.track===t}));n&&e.peerConnection.removeTrack(n)}))},dispose:function(){u=!0,l&&l.destroy()}}}(e,t,(function(e){o.forEach((function(t){t(e)}))}),(function(e){u.forEach((function(t){t(e)}))}),(function(e,t){l.forEach((function(n){n(e,t)}))}),(function(e,t){O.forEach((function(n){(0,n.listener)(e,t)}))})),networkStatusListeners:o,newPeerListeners:u,dataListeners:l,trackListeners:O,count:0},h.set(r,i)}if(n.networkStatusListener&&i.networkStatusListeners.add(n.networkStatusListener),n.newPeerListener&&i.newPeerListeners.add(n.newPeerListener),n.dataListener&&i.dataListeners.add(n.dataListener),n.trackListener){var j=new Set(Array.from(i.trackListeners).map((function(e){return e.mediaType}))),E=j.size;i.trackListeners.add(n.trackListener),j.add(n.trackListener.mediaType),E!==j.size&&i.room.acceptMediaTypes(Array.from(j))}i.count+=1;var y=i;return{broadcastData:i.room.broadcastData,addTrack:i.room.addTrack,removeTrack:i.room.removeTrack,unregister:function(){if(n.networkStatusListener&&y.networkStatusListeners.delete(n.networkStatusListener),n.newPeerListener&&y.newPeerListeners.delete(n.newPeerListener),n.dataListener&&y.dataListeners.delete(n.dataListener),n.trackListener){var e=new Set(Array.from(y.trackListeners).map((function(e){return e.mediaType}))),t=e.size;y.trackListeners.delete(n.trackListener),t!==(e=new Set(Array.from(y.trackListeners).map((function(e){return e.mediaType})))).size&&y.room.acceptMediaTypes(Array.from(e))}y.count-=1,y.count<=0&&(y.room.dispose(),h.delete(r))}}},E=function(e,t,n){var r=Object(u.useState)(),a=Object(i.a)(r,2),c=a[0],o=a[1];if(c&&"UNKNOWN_ERROR"===c.type)throw new Error("Network Error: ".concat(c.err.message));return Object(u.useEffect)((function(){return j(e,t,{networkStatusListener:function(e){o(e),n&&n(e)}}).unregister}),[e,t,n]),c},y=function(e,t,n){Object(u.useEffect)((function(){return j(e,t,{newPeerListener:function(){var e=Object(c.a)(a.a.mark((function e(t){var r,c,i,u,s,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!0,c=!1,e.prev=2,u=Object(o.a)(n());case 4:return e.next=6,u.next();case 6:return s=e.sent,r=s.done,e.next=10,s.value;case 10:if(l=e.sent,r){e.next=17;break}t(l);case 14:r=!0,e.next=4;break;case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(2),c=!0,i=e.t0;case 23:if(e.prev=23,e.prev=24,r||null==u.return){e.next=28;break}return e.next=28,u.return();case 28:if(e.prev=28,!c){e.next=31;break}throw i;case 31:return e.finish(28);case 32:return e.finish(23);case 33:case"end":return e.stop()}}),e,null,[[2,19,23,33],[24,,28,32]])})));return function(t){return e.apply(this,arguments)}}()}).unregister}),[e,t,n])},I=function(e,t){var n=Object(u.useRef)(),r=Object(u.useCallback)((function(){n.current&&n.current.apply(n,arguments)}),[]);return Object(u.useEffect)((function(){var r=j(e,t,{});return n.current=r.broadcastData,r.unregister}),[e,t]),r},w=function(e,t,n){Object(u.useEffect)((function(){return j(e,t,{dataListener:n}).unregister}),[e,t,n])},C=function(e,t,n,r){var a=Object(u.useState)({}),c=Object(i.a)(a,2),o=c[0],s=c[1];return Object(u.useEffect)((function(){if(r){var a=j(e,t,{trackListener:{mediaType:r,listener:n}});return s({addTrack:function(e){return a.addTrack(r,e)},removeTrack:function(e){return a.removeTrack(r,e)}}),function(){s({}),a.unregister()}}}),[e,t,n,r]),o}},38:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return new Promise((function(t){return setTimeout(t,e)}))}},39:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return"object"===typeof e&&null!==e}},42:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),a=n(0),c=n(39),i=n(36),o=[],u=function(e){var t={};return o.forEach((function(n){n.roomId===e&&(t[n.userId]=n.nickname)})),t},s=function(e,t){var n=Object(a.useState)((function(){return u(e)})),s=Object(r.a)(n,2),l=s[0],d=s[1];return Object(i.b)(e,t,Object(a.useCallback)((function(t,n){if(r=t,Object(c.a)(r)&&Object(c.a)(r.info)&&"string"===typeof r.info.nickname){var r,a=o.findIndex((function(t){return t.roomId===e&&t.userId===n.userId})),i=Date.now();a>=0?(o[a].nickname!==t.info.nickname&&(o[a].nickname=t.info.nickname),o[a].lastUpdated=i):o.push({roomId:e,userId:n.userId,nickname:t.info.nickname,lastUpdated:i});for(var s=o.length-1;s>=0;s-=1)o[s].lastUpdated+6e5<i&&o.splice(s,1);d((function(t){var n=u(e),r=Object.keys(n);return r.length===Object.keys(t).length&&r.every((function(e){return n[e]===t[e]}))?t:n}))}}),[e])),l}},43:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return f}));var r=n(1),a=n.n(r),c=n(3),i=n(2),o=n(38),u=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,o,u,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t?{video:{deviceId:t}}:{video:!0},e.next=3,navigator.mediaDevices.getUserMedia(n);case 3:return r=e.sent,i=r.getVideoTracks(),o=Object(c.a)(i,1),u=o[0],s=function(){u.stop()},e.abrupt("return",{stream:r,dispose:s});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,u,s,l,d,f,m,p,v,b,O,g,k,h,j,E;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t?{video:{deviceId:t}}:{video:!0},e.next=3,navigator.mediaDevices.getUserMedia(n);case 3:return r=e.sent,i=r.getVideoTracks(),u=Object(c.a)(i,1),s=u[0],(l=document.getElementById("internal-video")).style.display="block",l.srcObject=r,e.next=10,Object(o.a)(1e3);case 10:return d=l.videoWidth,f=l.videoHeight,m=document.getElementById("internal-canvas"),p=m.getContext("2d"),72,72,m.width=72,m.height=72,v=Math.max(72/d,72/f),b=Math.min(d,72/v),O=Math.min(f,72/v),g=(d-b)/2,k=(f-O)/2,function e(){p.drawImage(l,g,k,b,O,0,0,72,72),h=setTimeout(e,1e3/15)}(),j=m.captureStream(),E=function(){l.style.display="none",clearTimeout(h),s.stop(),j.getVideoTracks()[0].stop()},e.abrupt("return",{stream:j,dispose:E});case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,c,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,(n=document.createElement("video")).srcObject=new MediaStream([t]),r=0;case 4:if(!(r<50)){e.next=14;break}return e.next=7,Object(o.a)(100);case 7:if(c=n.videoWidth,i=n.videoHeight,!(c>0&&i>0)){e.next=11;break}return e.abrupt("return",72===c&&72===i);case 11:r+=1,e.next=4;break;case 14:return e.abrupt("return",!0);case 17:return e.prev=17,e.t0=e.catch(0),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}(),d=new WeakMap,f=function(e){if(d.has(e))return d.get(e);var t=l(e);return d.set(e,t),t}},62:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d}));var r=n(1),a=n.n(r),c=n(2),i=n(3),o=n(0),u=function(){var e=Object(c.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.enumerateDevices();case 3:return t=e.sent,n=t.filter((function(e){return"videoinput"===e.kind})).map((function(e){return{label:e.label,deviceId:e.deviceId}})),e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(c.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.enumerateDevices();case 3:return t=e.sent,n=t.filter((function(e){return"audioinput"===e.kind})).map((function(e){return{label:e.label,deviceId:e.deviceId}})),e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(o.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(o.useEffect)((function(){Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))()}),[]),n},d=function(){var e=Object(o.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(o.useEffect)((function(){Object(c.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:t=e.sent,r(t);case 4:case"end":return e.stop()}}),e)})))()}),[]),n}},65:function(e,t,n){},68:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=68},69:function(e,t,n){},71:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){},97:function(e,t,n){}}]);
//# sourceMappingURL=3.5baa3597.chunk.js.map